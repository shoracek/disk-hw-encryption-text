\chapter{Data collection}

To get an idea how much of the Opal standard is implemented by disks

and what do they implement other than the mandatory basics required by the Opal standard

In order to be able to compare a large number of disks and their Opal capabilities, 

so that we can compare their capabilities, 

For this purpose, we have collected a limited amount 

For these reasons we will use our \verb|discovery| utility, introduced in the subsection~\ref{utility_discovery}.

The raw collected data can be found in the appendix/attachments???, in this chapter we will focus only on the interesting excerpts ...

As our \verb|discovery| utility collects data without permanently affecting the device, we were able to 

since the data discovered using the utility are generated in a format like JSON with many utilities to parse it , we can use some of those already existing utilities to compare the properties of multiple disks...

Selection of some of the more interesting properties can be seen in table~\ref{fig:properties_table}. 

the values were edited to be more readable.



From our experience with Opal disks, most of them did not implement more than the required minimum\todo{TODO: fact recheck later on}. Some of the tested disks, even though they were described by the vendor and/or manufacturer as Opal-compliant, did not implement every required feature set. Out of the 6 tested disks, only 2 implemented the required Block SID Authentication feature set. However, even those 2 implementing the feature set did not support the actual feature.



\begin{table}[]
    \centering
    \begin{tabular}{|l|l|l|}
        \hline
                            & K\_AES\_128.Mode & K\_AES\_256.Mode \\ \hline
        SanDisk X300s       &                  & CBC              \\ \hline
        Kingston KC600      & XTS              & XTS              \\ \hline
        Samsung SSD 850 PRO &                  & XTS              \\ \hline
    \end{tabular}
    \caption{Comparison of selected disk properties}
    \label{fig:properties_table}
\end{table}

The first part of the table contains values acquired through the level 0 discovery, the second part (starting with \verb|MaxComPacketSize|) contains values obtained through the level 2 discovery. In case the disk did not report a value, empty cell is used.
There are some noticeable differences: since the first part is reported through firmly established C headers with static form, the numbers are parsed directly as C integers... the second part uses the TCG Storage protocol, with tokens that can be of different sizes --- notably in \verb|/dev/sdb| which returns numbers encoded with 4 bytes, even when not necessary.
Values of some variables are dependent on each other. For example, because \verb|MaxPackets| is always the minimum (1), then $\verb|MaxPacketSize| = \verb|MaxComPacketSize| - ($fixed size of \verb|MaxComPacketSize| header$)$.\todo{this is ocpypasted from the original... need to find what to write here...}



Ideas for comparison:
\begin{enumerate}
    \item Encryption modes (done)
    \item Look for bad parameters \begin{enumerate}
        \item asd
    \end{enumerate}
\end{enumerate}
